# Generate caterpillar-style plot of scores for NASEM "Workflow and reproducibility" sub-area

library("ggplot2")

# Read in data
reproducible.means.scores <- read.csv(file = "data/reproducible_means.csv", stringsAsFactors = FALSE)

ggplot(data = reproducible.means.scores, mapping = aes(x =Avg.Score, y = Subarea)) +            
+ theme_bw()) +  geom_point(mapping = aes(x = area, y = score),
               shape = 21,
               fill = "black",
               alpha = 0.25,
               size = 1) + 

scale_x_discrete('Scores’, labels=c('1', '2', '3,' ‘4’)) +

scale_y_discrete(‘Sub-Areas’, labels=c(‘Reproducible analysis’, ‘Workflows and workflow systems’)

size = 2.5, 
shape = 21,
fill = "black")

geom_point(data = program_means,
               mapping = aes(x = area, y = score),
               shape = 21,
               fill = "black",
               alpha = 0.25,
               size = 1)

scale_x_discrete('Scores’, labels=c('1', '2', '3,' ‘4’))

scale_y_discrete(‘Sub-Areas’, labels=c(‘Reproducible analysis’, ‘Workflows and workflow systems’)

geom_point(mapping = aes(y = mean_score), 
               size = 2.5, 
               shape = 21,
               fill = "white")


ggsave(filename = "output/reproducible.png", plot =        , width = 10, height = 10, units = "cm")

# Second way

library("ggplot2")

# Read in data
reproducible.scores <- read.csv(file = "data/reproducible_long.csv", stringsAsFactors = FALSE)

# Caterpillar plot


 # Will want to get labels for the graph, but only need it for Areas (not sub-
  # areas)
  plot_labels <- areas %>%
    filter(Status == "Area") %>%
    select(Area, Label) %>%
    rename(area = Area,
           label = Label)


# And order the data frame to align with levels based on mean scores
  plot_labels$area <- factor(x = plot_labels$area,
                             levels = area_levels)
  plot_labels <- plot_labels[order(plot_labels$area), ]
  # And finally re-level label, which will dictate the order in which 
  # things appear on the axis
  plot_labels$label <- factor(x = plot_labels$label,
                              levels = plot_labels$label)

ggplot(data = reproducible.scores, mapping = aes(x = Score, y = Sub-Area)) +            
+ theme_bw() 

  ggsave(filename = paste0("output/scores-", framework, ".pdf"),
         plot = scores_catplot,
         width = 10,
         height = nrow(plot_labels) + plot_height_mod, 
         units = "cm")
  
  ggsave(filename = paste0("output/scores-", framework, ".png"),
         plot = scores_catplot,
         width = 10,
         height = nrow(plot_labels) + plot_height_mod, 
         units = "cm")

plot_height_mod <- 3
